= Quick start guide

The purpose of this guide is to briefly explain how to integrate a Snowflake data warehouse into the _Stratio Generative AI Data Fabric_ platform.

== Prerequisites

You can find the prerequisites for installing the SSCC Snowflake connector in the xref:snowflake:operations-guide.adoc#_prerequisites[operations guide].

NOTE: Please note that the *user/password authentication mode* will be used in this quick start guide.

== Discover your data

=== Discovery agent

To install a _Stratio Data Governance_ discovery agent for Snowflake you must go to '_Stratio Command Center_' -> 'Deploy a Service' -> 'Connectors Data Warehouse' and select "Snowflake Agent".

When installing, you have to add the information corresponding to the database instance to be discovered, in addition to the URLs of the connectors repository where the necessary artifacts are stored and upload the access credentials to _Stratio KMS_.

The most important fields to fill in are:

* *_Root discovery path_*: path from which you want to discover the metadata recursively.
* *_Custom Service URL_*: JDBC URL used to connect to Snowflake. Example: `jdbc:snowflake://asd1234.us-east-1.snowflakecomputing.com/-db-`. The end of the string must contain the `/-db-` suffix.
* *_Access credentials_*: name of the secret created in _Stratio KMS_. Example: _snowflake-secret_.
* *_SSCC driver location_*: URL where the artifact that will contain the JAR of the SSCC Snowflake connector is located in the connectors repository. Example: `http://connectors.<tenant>-<namespace>/v1/api/artifact/sscc-snowflake-0.3_2.12-1.1.x.jar`.

TIP: More information on the other configuration parameters can be found in the xref:snowflake:operations-guide.adoc[operations guide].

Once the discovery process is completed, the data store will appear in the _Stratio Data Governance_ UI.

== Virtualize your data

=== Eureka agent

To use the BDL, you need to configure the Eureka agent with the SSCC Snowflake connector. To do this, simply add the URL of the connectors repository in the 'Customized deployment' -> 'Settings' -> `Additional jars` variable.

In the example being followed it looks like this:

* _Additional jars_: `http://connectors.<tenant>-<namespace>/v1/api/artifact/sscc-snowflake-0.3_2.12-1.1.x.jar`.

NOTE: Remember that, if you already have more than one artifact in the list, you have to add the following ones, separating them with a comma.

image::snowflake-bdl.png[]

=== _Stratio Virtualizer_

To use _Stratio Virtualizer_, the SSCC Snowflake connector needs to be configured. Para ello, debes añadir la URL del artefacto `sscc-snowflake-0.3_2.12-1.1.x` en la variable 'Customized deployment' -> 'Environment' -> 'External datastores' -> `JDBC Drivers URL List` y además subir las credenciales de acceso a _Stratio KMS_.

image::snowflake-virtualizer-conf.png[]

== Transforma tus datos

=== _Stratio Rocket_

Para el uso de _Stratio Rocket_ es necesario tener configurado el conector SSCC Snowflake. To do so, you need to add the URL of the artifacts in the 'Customized deployment' -> 'Environment' -> 'External datastores' -> `JDBC Drivers URL List` -> `Rocket extra jars` and also upload the access credentials to _Stratio KMS_.

In the example being followed, _Stratio Virtualizer_ would look like this:

* _Rocket extra jars_: `http://connectors.<tenant>-<namespace>/v1/api/artifact/sscc-snowflake-0.3_2.12-1.1.x.jar`.

TIP: More information on the other configuration parameters can be found in the xref:snowflake:operations-guide.adoc#rocket-configuration[operations guide].

=== _Stratio Intelligence_

You'll need to configure _Stratio Intelligence_ before integrating with the connector. You need to add the following properties:

* `INTERPOLATED_ANALYTIC_ENV_CROSSDATA_CATALOG_SECRET_INSTANCE_NAME`: ${username}.
* `ANALYTIC_ENV_VAULT_PATH`: "people"..
* `ANALYTIC_ENV_REQUESTS_CA_BUNDLE`: /opt/sds/stratio_analytic/security/ca-bundle.pem.
* `ANALYTIC_ENV_HIDE_VAULT_TOKEN`: "false".

In addition, in the multiuser environment, you need to enable the "Allow artifact deployment" option and have the _artifacts_ value in the path.

Once you've configured _Stratio Intelligence_, you have to add the SSCC Snowflake connector to the _artifacts/spark++_++jars_ directory and upload the credentials to _Stratio KMS_.

You can download the necessarys artifact from *http://connectors.<tenant>-<namespace>/v1/api/artifact/sscc-snowflake-0.3_2.12-1.1.x.jar* to the _artifacts/spark++_++jars_ folder in the _Stratio Intelligence_ workspace by making the following cURL request.

In this case, you could make the following request:

[source,bash]
----
curl http://connectors.<tenant>-<namespace>/v1/api/artifact/sscc-snowflake-0.3_2.12-1.1.x.jar --output sscc-snowflake-0.3_2.12-1.1.x.jar
----
