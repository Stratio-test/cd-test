= User guide

== Descripción

The SSCC SAS® connector allows you to integrate files generated by SAS® Grid Manager into _Stratio Generative AI Data Fabric_.

Both the supported features and the different versions are found in the xref:sas-grid-manager:compatibility-matrix.adoc[compatibility matrix].

== Discover your data

=== Know your data

The SSCC SAS® Grid Manager connector discovers the different data of the SAS® Grid Manager platform as follows:

* SAS® Grid Manager is a platform with several components. One of them is the data server, which stores the data physically in tables in `sas7bdat` format.
* The connector makes the connection using the SFTP protocol and extracts the resources on the configured resource root. This way, the data and metadata of the `sas7bdat` type resources are extracted by the connector.

In addition to what xref:stratio-data-governance:user-manual:from-a-data-store-to-a-dictionary.adoc#_tables_and_columns[__Stratio Data Governance__] shows, you can also find technical attributes extracted from SAS® resources. All metadata provided by SAS® is extracted and added to the _Stratio Data Governance_ UI.

* The metadata extracted at the dataset level are _ServiceURL_, _filesystemName_, _filesystemPath_ and _filesystemType_.
* The metadata extracted at the folder level (final) are _type_, _creationTime_, _hrSize_, _isDirectory_, _isRegularFile_, _lastModified_, _path_ and _size_.
* The metadata extracted at the table level are _compressionMethod_, _encoding_, _fileLabel_, _OSName_, _OSType_, _SASRelease_, _serverType_, _sessionEncoding_, _dateCreated_, _dateModified_, _deletedRowCount_, _endianness_, _headerLength_, _pageCount_, _pageLength_ and _rowLength_.
* The metadata extracted at the column level are _format_, _label_, _sourceType_ y _columnLength_.

SAS® supports a few data types. However, SAS® columns support multiple formats for a given basic type. In _Stratio Data Governance_, type conversion is performed as follows:

- If the data type is _char_ or _varchar_, the data type in _Stratio Data Governance_ will be _string_.
- If the data type is _double_, the format will be taken into account. In either case, the user will be able to see the original format in the `format` column attribute.

=== BDL virtualization

The discovery process is asynchronous. Once completed, it can be viewed from the _Stratio Data Governance_ UI.

The connector supports customization of data access in virtualized tables using xref:stratio-data-governance:user-manual:bdl-virtualization.adoc#_bdl_custom_attributes[advanced BDL attributes] from __Stratio Data Governance__, modifiable from the UI:

* `minBlockSize`
* `maxBlockSize`

NOTE: You can consult how to create attributes in the xref:stratio-data-governance:user-manual:addition-of-metadata[_Stratio Data Governance_ user guide].

TIP: For more details on the use of the BDL, see the xref:stratio-data-governance:user-manual:data-processing-with-bdl.adoc[BDL data processing documentation].

== Virtualize your data

After tables have been discovered, you can add them to a technical view of a collection. All the configurable parameters of the discovery and those parameters modified from the _Stratio Data Governance_ UI are propagated in the collections where that table is added.

TIP: To learn more about how to manage collections you can consult the xref:stratio-data-governance:user-manual:collections.adoc[_Stratio Data Governance_ user guide].

IMPORTANT: Note that to virtualize the discovered tables, you need to manage the xref:stratio-gosec:operations-manual:data-access/manage-policies/manage-domains-policies.adoc[domain policies] through _Stratio GoSec_.

To create a table directly in the _Stratio Virtualizer_ catalog, you can execute the following statement:

[source,sql]
----
CREATE TABLE sas_table(
    col1 INT,
    col2 STRING,
    col3 ...
) USING com.stratio.connectors.sasgrid OPTIONS (
   `SASGridHost`         '<sas_grid_host>',
   `stratiosecurity`     'true',
   `stratiosecuritymode` 'custom_sscc',
   `stratiocredentials`  '<nombre_secreto>',
   `stratiossccdriver`   'com.stratio.connectors.ssccsasgrid.SasGridDriverMD5',
   `path`   '<root_path>'
)
----

Add the following options to the table depending on your requirements:

* `headerReadTime`: if your table has many columns, reading may take quite a while. Increase this number if this happens (default is 5 seconds).
* `minBlockSize`: the minimum size a partition must have. The default is 64MB.
* `maxBlockSize`: the maximum size a partition should have.

== Transform your data

=== _Stratio Rocket_

After the data has been virtualized, you can access it from _Stratio Rocket_ using:

* The catalog.
+
image::sas-rocket-catalog.png[]

* In the _workflows_, using the input from xref:stratio-rocket:user-guide:workflow-asset/data-inputs.adoc#_stratio_virtualizer[_Stratio Virtualizer_].
+
image::sas-rocket-virtualizer.png[]
+
The result of the execution of a _workflow_:
+
image::sas-rocket-output.png[]

=== _Stratio Intelligence_

TIP: For more information on data consistency from _Stratio Intelligence_ see the xref:ROOT:commiters.adoc[integration document].
