= Quick start guide

The purpose of this guide is to briefly explain how to integrate a PostgreSQL® database into the _Stratio Generative AI Data Fabric_ platform.

== Prerequisites

You can find the prerequisites for installing the PostgreSQL® connector in the xref:postgres:operations-guide.adoc#_prerrequisitos[operations guide].

== Discover your data

=== Discovery agent

* To install a _Stratio Data Governance_ discovery agent for an external PostgreSQL®, select "PostgreSQL® Agent (External)" in '_Stratio Command Center_' -> 'Deploy a Service' -> 'Connectors RDBMS'.
+
When installing, you need to add the URL of the connectors repository where the `sscc-postgresql-0.3_2.12-1.1.x` artifact is stored and upload the access credentials to _Stratio KMS_.
+
The most important fields to fill in are:

** *_Root discovery path_*: path from which you want to discover the metadata recursively. For example: `/<database>`.
** *_Access credentials_*: name of the secret created in _Stratio KMS_. For example: `<secret_name>`.
** *_Data store driver location_*: URL where the artifact that will contain the JAR of the selected JDBC driver is located in the connectors repository. For example: `http://connectors.<tenant>-<namespace>/<path>/v1/api/artifact/sscc-postgresql-0.3_2.12-1.1.x.jar`.

TIP: More information on the other configuration parameters can be found in the xref:postgres:operations-guide.adoc#_discovery_agent[operations guide].

* To install a _Stratio Data Governance_ discovery agent for an internal PostgreSQL®, select "PostgreSQL® Agent (Internal)" in '_Stratio Command Center_' -> 'Deploy a Service' -> 'Connectors RDBMS'.
+
The most important fields to fill in are:

*** *_Define a namespace_*: select the namespace where you want to install the discovery agent.
*** *_PostgreSQL® to be discovered_*: select the PostgreSQL® service you want to discover.
*** *_PostgreSQL® used for policy creation_*: select the PostgreSQL® used for policy creation.
*** *_Init path_*: databases that will be discovered. Example: `/db1,/db2`.

== Virtualize your data

=== Eureka agent

To use the BDL, you need to configure the Eureka agent with the PostgreSQL® connector. To do this, simply add the URL of the connectors repository of the `sscc-postgresql-0.3_2.12-1.1.x` artifact in the 'Customized deployment' -> 'Settings' -> `Additional jars` variable.

image::postgres-bdl-conf.png[]

NOTE: Remember that, if you already have more than one artifact in the list, you have to add the following ones, separating them with a comma.

=== _Stratio Virtualizer_

To use _Stratio Virtualizer_, the PostgreSQL® connector needs to be configured. To do so, you need to add the URL of the `sscc-postgresql-0.3_2.12-1.1.x` artifact in the 'Customized deployment' -> 'Environment' -> 'External datastores' -> `JDBC Drivers URL List` variable and also upload the access credentials to _Stratio KMS_.

image::postgres-virtualizer-conf.png[]

== Transform your data

=== _Stratio Rocket_

To use _Stratio Rocket_, the PostgreSQL® connector needs to be configured. To do this, you must add the URL of the `sscc-postgresql-0.3_2.12-1.1.x` artifact in the 'Customized deployment' -> 'Settings' -> 'Classpath' -> `Rocket extra jars` variable and also upload the access credentials for workflows and for _Stratio Rocket_ to _Stratio KMS_.

image::postgres-rocket-conf.png[]

TIP: More information on the other configuration parameters can be found in the xref:postgres:operations-guide.adoc#rocket-configuration[operations guide].

=== _Stratio Intelligence_

You'll need to configure _Stratio Intelligence_ before integrating with the connector. You need to add the following properties:

* `INTERPOLATED_ANALYTIC_ENV_CROSSDATA_CATALOG_SECRET_INSTANCE_NAME`: ${username}
* `ANALYTIC_ENV_VAULT_PATH`: "people".
* `ANALYTIC_ENV_REQUESTS_CA_BUNDLE`: /opt/sds/stratio_analytic/security/ca-bundle.pem
* `ANALYTIC_ENV_HIDE_VAULT_TOKEN`: "false"

In addition, in the multiuser environment, you need to enable the Allow artifact deployment option and have the _artifacts_ value in the path.

Once you've configured _Stratio Intelligence_, you have to add the PostgreSQL® connector to the _artifacts/spark++_++jars_ directory and upload the credentials to _Stratio KMS_.

You can download the necessary artifact to the _artifacts/spark++_++jars_ folder in the _Stratio Intelligence_ workspace by making the following cURL request.

[source,bash]
----
curl http://connectors.<tenant>-<namespace>/<path>/v1/api/artifact/sscc-postgresql-0.3_2.12-1.1.x --output sscc-postgresql-0.3_2.12-1.1.x
----
