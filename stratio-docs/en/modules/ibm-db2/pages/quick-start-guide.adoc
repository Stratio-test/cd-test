= Quick start guide

The purpose of this guide is to briefly explain how to integrate an IBM Db2 database into the _Stratio Generative AI Data Fabric_ platform.

== Prerequisites

You can find the prerequisites for installing the IBM Db2 connector in the xref:ibm-db2:operations-guide.adoc#_prerequisites[operations guide].

== Discover your data

=== Discovery agent

To install a _Stratio Data Governance_ discovery agent for IBM Db2, you have to add the information corresponding to the IBM Db2 instance to be discovered, in addition to the URLs of the connectors repository where the `sscc-db2-0.3_2.11-1.4.x.jar` and `jcc-11.5.0.0.jar` artifacts are stored and upload the access credentials to _Stratio KMS_.

The most important fields to fill in are:

* *_Root discovery path_*: path from which you want to discover the metadata recursively. Example: _/db1,/db2,/db3_.
* *_Custom Service URL_*: JDBC URL used to connect to IBM Db2. Example: `jdbc:db2://your.host.com:50000/-db-`. The end of the string must contain the `/-db-` suffix.
* *_SSCC driver location_*: URL where the artifact that will contain the JAR of the IBM Db2 SSCC connector is located in the connectors repository. Example: `http://connectors.<tenant>-<namespace>/v1/api/artifact/sscc-db2-0.3_2.12-1.4.x.jar`.
* *_JDBC driver location_*: URL where the artifact that will contain the JAR of the selected JDBC driver is located in the connectors repository. Example: `http://connectors.<tenant>-<namespace>/v1/api/artifact/jcc-11.5.0.0.jar`.

TIP: More information on the other configuration parameters can be found in the xref:ibm-db2:operations-guide.adoc#_discovery_agent[operations guide].

Once the discovery process is completed, the data store will appear in the _Stratio Data Governance_ UI.

== Virtualize your data

=== Eureka agent

To use the BDL, you need to configure the Eureka agent with the SSCC IBM Db2 connector. To do this, simply add the URL of the connectors repository of the `sscc-db2-0.3_2.12-1.4.x.jar` artifact in the 'Customized deployment' -> 'Settings' -> `Additional jars` variable.

In the example being followed, the Eureka agent looks like this:

* _Additional jars_: *http://connectors.<tenant>-<namespace>/v1/api/artifact/sscc-db2-0.3_2.12-1.4.x.jar*.

NOTE: Remember that, if you already have more than one artifact in the list, you have to add the following ones, separating them with a comma.

=== _Stratio Virtualizer_

To use _Stratio Virtualizer_, the IBM Db2 connector needs to be configured. To do so, you need to add the URL of the `sscc-db2-0.3_2.12-1.4.x.jar` artifact in the 'Customized deployment' -> 'Environment' -> 'External datastores' -> `JDBC Drivers URL List` variable and also upload the access credentials to _Stratio KMS_.

In the example being followed, _Stratio Virtualizer_ would look like this:

* _JDBC Drivers URL List_: *http://connectors.<tenant>-<namespace>/v1/api/artifact/sscc-db2-0.3_2.12-1.4.x.jar,http://connectors.<tenant>-<namespace>/v1/api/artifact/jcc-11.5.0.0.jar*.

== Transform your data

=== _Stratio Rocket_

To use _Stratio Rocket_, the SSCC IBM Db2 connector needs to be configured. To do this, you must add the URL of the `sscc-db2-0.3_2.12-1.4.x.jar` and `http://connectors.<tenant>-<namespace>/v1/api/artifact/jcc-11.5.0.0.jar` artifacts in the 'Customized deployment' -> 'Settings' -> 'Classpath' -> `Rocket extra jars` variable and also upload the access credentials for the _workflows_ and for _Stratio Rocket_ to _Stratio KMS_.

In the example being followed, _Stratio Rocket_ would look like this:

** _Rocket extra jars_: *http://connectors.<tenant>-<namespace>/v1/api/artifact/sscc-db2-0.3_2.12-1.0.x.jar,http://connectors.<tenant>-<namespace>/v1/api/artifact/jcc-11.5.0.0.jar*.
** _Spark classpath extra jars_: *http://connectors.<tenant>-<namespace>/v1/api/artifact/jcc-11.5.0.0.jar*.

TIP: More information on the other configuration parameters can be found in the xref:ibm-db2:operations-guide.adoc#rocket-configuration[operations guide].

=== _Stratio Intelligence_

To see how to set up _Stratio Intelligence_, refer to the xref:stratio-connectors:ROOT:quick-start-guide.adoc#_stratio_intelligence[_Stratio Intelligence_] section of the user guide.

Once you've configured _Stratio Intelligence_, you have to add the SSCC IBM Db2 connector to the _artifacts/spark++_++jars_ directory (create one if it doesn't exist) and upload the access credentials to _Stratio KMS_.

To upload the artifact, you have to download it to the _artifacts/spark++_++jars_ directory in the _Stratio Intelligence_ workspace by issuing a cURL request. In this case, you could make the following request:

[source,bash]
----
curl http://connectors.<tenant>-<namespace>/v1/api/artifact/sscc-db2-0.3_2.12-1.4-x.jar --output sscc-db2-0.3_2.12-1.4-x.jar
curl http://connectors.<tenant>-<namespace>/v1/api/artifact/jcc-11.5.0.0.jar --output jcc-11.5.0.0.jar
----

The following image shows how it is stored in the folder:

image::db2-intelligence-packages.png[]

Once this configuration is done, you'll be able to access the tables that have been virtualized from the external IBM Db2 database.

image::db2-intelligence-consulta-db2.png[]

Restart the PySpark Kernel.
