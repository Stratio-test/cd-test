= Quick start guide

The purpose of this guide is to briefly explain how to integrate BigQuery into the _Stratio Generative AI Data Fabric_ platform.

== Prerequisites

You can find the prerequisites for installing the SSCC BigQuery connector in the xref:bigquery:operations-guide.adoc#_prerequisites[operations guide].

== Discover your data

=== Discovery agent

To install a _Stratio Data Governance_ discovery agent for BigQuery, select "BigQueryAgent" in '_Stratio Command Center_' -> 'Deploy a Service' -> 'Connectors Data Warehouse'.

When installing, you need to add the information corresponding to the BigQuery project to be discovered, in addition to the URL of the connectors repository where the `sscc-bigquery-0.3_2.12-1.10.x` artifact is stored and upload the access credentials to _Stratio KMS_.

The most important fields to fill in are:

* *_Root discovery path_*: path from which you want to discover the metadata recursively. For example: */<project_name>*.
* *_Access credentials_*: name of the secret created in _Stratio KMS_. For example: `bigquery-secret`.
* *_Data store driver location_*: URL where the artifact that will contain the JAR of the SSCC BigQuery connector is located in the connectors repository. For example: `http://connectors.<tenant>-<namespace>/v1/api/artifact/sscc-bigquery-0.3_2.12-1.10.x.jar`.

TIP: More information on the other configuration parameters can be found in the xref:bigquery:operations-guide.adoc#_discovery_agent[operations guide].

== Virtualize your data

=== Eureka agent

To use the BDL, you need to configure the Eureka agent with the BigQuery connector. To do this, simply add the URL of the connectors repository of the `sscc-bigquery-0.3_2.12-1.10.x` artifact in the 'Customized deployment' -> 'Settings' -> `Additional jars` variable.

image::bigquery-bdl.png[]

NOTE: Remember that, if you already have more than one artifact in the list, you have to add the following ones, separating them with a comma.

=== _Stratio Virtualizer_

To use _Stratio Virtualizer_ you need to have the BigQuery connector configured. To do so, you need to add the URL of the `sscc-bigquery-0.3_2.12-1.10.x` and `simba-jdbc-bigquery-X.X.X.jar` artifacts in the 'Customized deployment' -> 'Environment' -> 'External datastores' -> `JDBC Drivers URL List` variable and also upload the access credentials to _Stratio KMS_.

image::bigquery-virtualizer-conf.png[]

== Transform your data

=== _Stratio Rocket_

To use _Stratio Rocket_ you need to have the BigQuery connector configured. To do this, you must add the URL of the `sscc-bigquery-0.3_2.12-1.10.x` and `simba-jdbc-bigquery-X.X.X.jar` artifacts in the 'Customized deployment' -> 'Settings' -> 'Classpath' -> `Rocket extra jars` variable and also upload the access credentials for _workflows_ and for _Stratio Rocket_ to _Stratio KMS_.

If you want to perform queries with the native dialect of _Stratio Virtualizer_, you need to add the URL of the Simba JDBC artifact.

image::bigquery-rocket-conf.png[]

TIP: More information on the other configuration parameters can be found in the xref:bigquery:operations-guide.adoc#rocket-configuration[operations guide].

=== _Stratio Intelligence_

You'll need to configure _Stratio Intelligence_ before integrating with the connector. The following properties must be added:

* `INTERPOLATED_ANALYTIC_ENV_CROSSDATA_CATALOG_SECRET_INSTANCE_NAME`: ${username}
* `ANALYTIC_ENV_VAULT_PATH`: "people".
* `ANALYTIC_ENV_REQUESTS_CA_BUNDLE`: /opt/sds/stratio_analytic/security/ca-bundle.pem
* `ANALYTIC_ENV_HIDE_VAULT_TOKEN`: "false"

In addition, in the multiuser environment, you need to enable the "Allow artifact deployment" option and have the _artifacts_ value in the path.

Once you've configured _Stratio Intelligence_, you have to add the BigQuery connector to the _artifacts/spark++_++jars_ directory and upload the credentials to _Stratio KMS_.

To upload the artifact, you have to download it from *http://connectors.<tenant>-<namespace>/v1/api/artifact/sscc-bigquery-0.3_2.12-1.10.x* to the _artifacts/spark++_++jars_ directory in the _Stratio Intelligence_ workspace by issuing a cURL request.

In this case, make the following request:

[source,bash]
----
curl http://connectors.<tenant>-<namespace>/v1/api/artifact/sscc-bigquery-0.3_2.12-1.10.x --output sscc-bigquery-0.3_2.12-1.10.x
----
